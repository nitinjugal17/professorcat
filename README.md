# Tiny Tales Weaver üêà

![Tiny Tales Weaver Banner](https://placehold.co/1200x628.png?text=Tiny+Tales+Weaver)

**Weave enchanting stories about a bustling world filled with tiny, adventurous cats and watch their tales come to life with AI-generated illustrations and narration!**

Tiny Tales Weaver is a full-stack web application built with Next.js and Genkit that leverages the power of Google's Gemini AI to turn user prompts into beautifully illustrated, multi-lingual stories. This project serves as a comprehensive example of integrating modern web technologies with cutting-edge generative AI.

## ‚ú® Features

- **ü§ñ AI Story Generation**: Enter a simple idea, and our AI storyteller crafts a unique, engaging tale about tiny cats.
- **üåê Multi-lingual Support**: Generate stories in both **English** and **‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)**.
- **üé® AI Illustration Generation**: Each sentence of the story is accompanied by a unique, minimalist black and white line-art illustration, generated by AI.
- **üñºÔ∏è Interactive Story Viewer**: Navigate through the story sentence-by-sentence with an intuitive slider interface.
- **üìÑ PDF Export**: Compile the entire story and its illustrations into a downloadable PDF book.
- **üé¨ GIF Creation**: Create an animated GIF from the story's illustrations to easily share the tale.
- **üé§ Video Export with Narration**: Generate a video of the story, complete with illustrations and AI-powered voice narration for each sentence using Gemini TTS.
- **‚úçÔ∏è Cat Tales Blog**: "Publish" your favorite generated stories to a public-facing blog section on the main page.
- **üîê Admin Dashboard**: A client-side password-protected dashboard to manage content and users.
- **üîß Granular Access Control**: From the admin panel, manage global feature limitations or set per-user access rights and numeric generation quotas (e.g., 50 stories per user).
- **üöÄ Resilient API Handling**: The app intelligently handles API rate limits (429 errors) with a dynamic backoff strategy, UI countdown timer, and an option to cancel pending requests.

---

## üõ†Ô∏è Tech Stack

This project is built with a modern, robust, and type-safe technology stack.

- **Framework**: [Next.js](https://nextjs.org/) (using the App Router)
- **Language**: [TypeScript](https://www.typescriptlang.org/)
- **AI Integration**: [Genkit](https://firebase.google.com/docs/genkit)
- **Generative AI Models**: [Google Gemini](https://ai.google.dev/) (including `gemini-flash` for text, experimental models for images, and TTS for audio)
- **Styling**: [Tailwind CSS](https://tailwindcss.com/)
- **UI Components**: [ShadCN UI](https://ui.shadcn.com/)
- **Icons**: [Lucide React](https://lucide.dev/guide/packages/lucide-react)
- **Forms**: [React Hook Form](https://react-hook-form.com/) & [Zod](https://zod.dev/) for validation

---

## üöÄ Getting Started: End-to-End Setup

Follow these steps to get a local copy of Tiny Tales Weaver up and running on your machine.

### Prerequisites

- [Node.js](https://nodejs.org/) (version 20.x or higher recommended)
- `npm` or `yarn` package manager

### 1. Clone the Repository

First, clone the project to your local machine:
```bash
git clone https://github.com/your-username/tiny-tales-weaver.git
cd tiny-tales-weaver
```

### 2. Install Dependencies

Install all the required npm packages:
```bash
npm install
```

### 3. Set Up Environment Variables

This project requires an API key from Google AI Studio to use the Gemini models via Genkit.

1.  Create a `.env` file in the root of the project by making a copy of the example file:
    ```bash
    cp .env.example .env
    ```
2.  **Get your Google AI API Key**:
    *   Visit [Google AI Studio](https://aistudio.google.com/).
    *   Click on **"Get API key"** and create a new API key.
3.  Open the `.env` file and add your API key:
    ```env
    # .env
    GOOGLE_API_KEY="YOUR_API_KEY_HERE"
    ```

### 4. Run the Application

The application requires two processes to run concurrently: the Next.js frontend and the Genkit development server for the AI flows.

1.  **Start the Next.js Development Server**:
    Open a terminal and run:
    ```bash
    npm run dev
    ```
    This will start the web application, typically on `http://localhost:9002`.

2.  **Start the Genkit Development Server**:
    Open a *second* terminal and run:
    ```bash
    npm run genkit:dev
    ```
    This starts the local Genkit server that the Next.js app communicates with to run the AI flows. You can view the Genkit developer UI at `http://localhost:4000`.

Your application is now fully running!

---

## üìñ How to Use

### Main Application
1.  Navigate to `http://localhost:9002`.
2.  Enter a story idea in the text area (e.g., "A group of tiny cats discover a mysterious, glowing mushroom").
3.  Select a language (English or Hindi).
4.  Click **"Generate Story"**.
5.  The story text will be generated and displayed in the main panel, and illustrations will begin generating for each sentence. A progress bar will show the status.
6.  Once illustrations are complete, use the **Previous/Next** buttons to navigate through your story.
7.  Use the **"Download PDF"**, **"Create GIF"**, or **"Download Video"** buttons to export your creation.

### Admin Dashboard
1.  Navigate to `http://localhost:9002/admin`.
2.  Enter the password: `adminpassword123`
3.  From the dashboard, you can:
    *   View and delete story generation history.
    *   View and delete published blog posts.
    *   Download content and user data as CSV files.
    *   Manage user accounts (status, permissions).
    *   Set global feature limitations for all users.
    *   Configure per-user feature access and numeric generation limits.

---

## ü§ù Contributing

Contributions are what make the open-source community such an amazing place to learn, inspire, and create. Any contributions you make are **greatly appreciated**.

1.  Fork the Project.
2.  Create your Feature Branch (`git checkout -b feature/AmazingFeature`).
3.  Commit your Changes (`git commit -m 'Add some AmazingFeature'`).
4.  Push to the Branch (`git push origin feature/AmazingFeature`).
5.  Open a Pull Request.

---

## üìú License

This project is distributed under the GNU General Public License v3.0. See `LICENSE.txt` for more information.

```
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
```

---

## ‚ùì Common FAQ

**Q: Why are illustrations not generating or showing errors?**
**A:** This is most likely due to one of two reasons:
1.  **Missing API Key**: Ensure your `GOOGLE_API_KEY` is correctly set in your `.env` file and that you have restarted the Genkit server.
2.  **API Rate Limits**: You may have exceeded the free tier usage limits for the Gemini image generation model. The app has a built-in retry mechanism for this. If you see a "429 Too Many Requests" error, please wait for the countdown to finish or try again later.

**Q: Is the Admin Dashboard secure?**
**A:** The password protection on the admin dashboard is for **prototype and demonstration purposes only**. It is implemented entirely on the client-side, which means the password and all admin logic are visible in the browser's source code. **Do not use this method to protect sensitive data in a production environment.** Real-world applications require backend authentication.

**Q: How do I change the admin password?**
**A:** For this prototype, the password is hardcoded. You can change it directly in the `src/app/admin/page.tsx` file by modifying the `ADMIN_PASSWORD` constant.

**Q: Why does the app need a Google AI API Key?**
**A:** The application uses Google's powerful Gemini family of models for all its generative AI features, including text, image, and audio generation. Genkit uses this API key to authenticate your requests to the Google AI services.
